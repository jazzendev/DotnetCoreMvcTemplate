function registerControllers(){var n=!0,t,i,r=$('<div style="position:absolute;z-index:5001;display:none;" class="suggest-box"><div class="list-group ac-container"><a class="list-group-item">加载数据...<\/a><\/div><\/div>'),u=$('<div style="position:absolute;z-index:5001;display:none;" class="suggest-box"><div class="box-group ac-container"><a class="box-group-item">加载数据...<\/a><\/div><\/div>');$("input[auto-complete='on'][auto-complete-type='list']").after(r);$("input[auto-complete='on'][auto-complete-type='box']").after(u);$("input[auto-complete='on']").on("blur",function(){$(".suggest-box").hide().children("div.list-group").empty();n=!0}).on("keyup click",function(){var u;n=!1;var r=$(this),o=r.position(),s=o.left,h=o.top+r.innerHeight()+2;url=r.attr("auto-complete-url");var c=r.attr("auto-complete-name"),l=r.attr("auto-complete-id"),a=r.attr("auto-complete-domain"),f=r.attr("auto-complete-type"),e=r.next();e.css({top:h,left:s,minWidth:r.outerWidth()});u=e.children("div.ac-container");t&&t.abort();i&&clearTimeout(i);i=setTimeout(function(){t=$.ajax({url:url,method:"GET",data:{name:r.val()}}).done(function(t){u.empty();t.result&&t.result.length>0?t.result.forEach(function(n){var t;t=f=="list"?'<a class="list-group-item list-group-item-action ac-list-item" ':f=="box"?'<a class="box-group-item ac-list-item" ':'<a class="ac-list-item" ';n.id&&(t+='data-id="'+n.id+'" data-id-target="'+l+'" ');n.name&&(t+='data-name="'+n.name+'" data-name-target="'+c+'" ');n.domain&&(t+='data-domain="'+n.domain+'" data-domain-target="'+a+'" ');t+=">"+n.name+"<\/a>";u.append(t)}):f=="list"?u.append('<a class="list-group-item" disabled>未找到'+r.val()+"。<\/a>"):f=="box"&&u.append('<a class="box-group-item" disabled>未找到'+r.val()+"。<\/a>");n||e.show()})},500)});$("body").on("mousedown",".ac-list-item",function(){var n=$(this),t=n.attr("data-name-target"),i=n.attr("data-id-target"),r=n.attr("data-domain-target");$("#"+t).is("input")?$("#"+t).val(n.attr("data-name")):$("#"+t).html(n.attr("data-name"));$("#"+i).is("input")?$("#"+i).val(n.attr("data-id")):$("#"+i).html(n.attr("data-id"));$("#"+r).is("input")?$("#"+r).val(n.attr("data-domain")):$("#"+r).html(n.attr("data-domain"))})}(function(n){n.app={blockUI:function(){$.blockUI({css:{border:"none",padding:"15px 0",backgroundColor:"transparent",borderRadius:"15px","-webkit-border-radius":"10px","-moz-border-radius":"10px",opacity:1,top:"20%"},overlayCSS:{backgroundColor:"#c7c7c7"},message:$("#loader")})},unblockUI:function(){$.unblockUI()}}})(window);$.validator.setDefaults({ignore:null});$(function(){function n(n,t){for(var i=window,r=(n||"").split(".");i&&r.length;)i=i[r.shift()];return typeof i=="function"?i:(t.push(n),Function.constructor.apply(null,t))}function i(n){return n==="GET"||n==="POST"}function r(n,t,i){var r;i.indexOf("application/x-javascript")===-1&&(r=(n.getAttribute("data-ajax-mode")||"").toUpperCase(),$(n.getAttribute("data-ajax-update")).each(function(n,i){var u;switch(r){case"BEFORE":u=i.firstChild;$("<div />").html(t).contents().each(function(){i.insertBefore(this,u)});break;case"AFTER":$("<div />").html(t).contents().each(function(){i.appendChild(this)});break;case"REPLACE-WITH":$(i).replaceWith(t);break;default:$(i).html(t)}}))}function t(t,u){var e,f,o;e=$(t.getAttribute("data-ajax-loading"));o=parseInt(t.getAttribute("data-ajax-loading-duration"),10)||0;$.extend(u,{type:t.getAttribute("data-ajax-method")||undefined,url:t.getAttribute("data-ajax-url")||undefined,cache:!!t.getAttribute("data-ajax-cache"),beforeSend:function(){n(t.getAttribute("data-ajax-begin"),["xhr"]).apply(t,arguments)},complete:function(){n(t.getAttribute("data-ajax-complete"),["xhr","status"]).apply(t,arguments)},success:function(i,u,f){r(t,i,f.getResponseHeader("Content-Type")||"text/html");n(t.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(t,arguments)},error:function(){n(t.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(t,arguments)}});u.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});f=u.type.toUpperCase();i(f)||(u.type="POST",u.data.push({name:"X-HTTP-Method-Override",value:f}));$.ajax(u)}$(document).on("click","div.pagination-wrapper .page-link[data-page]",function(n){var i=$(this).closest("div.pagination-wrapper"),f,u,o;if(n.preventDefault(),i){var s=$(this).attr("data-page"),h=i.attr("asp-controller"),c=i.attr("asp-action"),e=h+"/"+c,l=i.attr("data-ajax-method"),a=i.find("input.pagination-data").val(),r=JSON.parse(a);if(r){r.Page=s;f=[];for(u in r)r.hasOwnProperty(u)&&(o=r[u],f.push({name:u,value:o}));e&&t(i[0],{url:e,type:l||"GET",data:f})}}});$(document).on("click","a.sorting",function(n){var h=$(this).attr("paging-target"),e=$(this).attr("paging-sort-col"),c=$(this).attr("paging-sort-asc"),l=c==="True",r=$(h),f,u,s;if(n.preventDefault(),r){var a=r.attr("asp-controller"),v=r.attr("asp-action"),o=a+"/"+v,y=r.attr("data-ajax-method"),p=r.find("input.pagination-data").val(),i=JSON.parse(p);if(i){i.Page=0;i.SortingItems&&(i.SortingItems.forEach(function(n,t){if(n.Name==e)return i.SortingItems.splice(t,1),!1}),i.SortingItems.splice(0,0,{Name:e,IsAscending:!l}),i.SortItemString=JSON.stringify(i.SortingItems),delete i.SortingItems);f=[];for(u in i)i.hasOwnProperty(u)&&(s=i[u],f.push({name:u,value:s}));o&&t(r[0],{url:o,type:y||"GET",data:f})}}})});